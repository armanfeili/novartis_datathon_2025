{
  "timestamp": "2025-11-30T10:15:25.458777",
  "git_commit": "5456d368",
  "scenario": 2,
  "model_type": "catboost",
  "random_seed": 42,
  "dataset": {
    "total_rows": 93744,
    "total_series": 1953,
    "train_rows": 26726,
    "train_series": 1562,
    "val_rows": 6628,
    "val_series": 391
  },
  "validation": {
    "val_fraction": 0.2,
    "stratify_by": "bucket",
    "split_level": "series"
  },
  "configs": {
    "run_config": {
      "reproducibility": {
        "seed": 42,
        "deterministic": true
      },
      "validation": {
        "val_fraction": 0.2,
        "stratify_by": "bucket",
        "split_level": "series"
      },
      "scenarios": {
        "scenario1": {
          "name": "Scenario 1 - No Post-Entry Actuals",
          "forecast_start": 0,
          "forecast_end": 23,
          "feature_cutoff": 0,
          "target_months": [
            0,
            1,
            2,
            3,
            4,
            5,
            6,
            7,
            8,
            9,
            10,
            11,
            12,
            13,
            14,
            15,
            16,
            17,
            18,
            19,
            20,
            21,
            22,
            23
          ]
        },
        "scenario2": {
          "name": "Scenario 2 - First 6 Months Available",
          "forecast_start": 6,
          "forecast_end": 23,
          "feature_cutoff": 6,
          "target_months": [
            6,
            7,
            8,
            9,
            10,
            11,
            12,
            13,
            14,
            15,
            16,
            17,
            18,
            19,
            20,
            21,
            22,
            23
          ]
        }
      },
      "official_metric": {
        "bucket_threshold": 0.25,
        "bucket_weights": {
          "bucket1": 2.0,
          "bucket2": 1.0
        },
        "metric1": {
          "monthly_weight": 0.2,
          "accumulated_0_5_weight": 0.5,
          "accumulated_6_11_weight": 0.2,
          "accumulated_12_23_weight": 0.1,
          "monthly_range": [
            0,
            23
          ]
        },
        "metric2": {
          "monthly_weight": 0.2,
          "accumulated_6_11_weight": 0.5,
          "accumulated_12_17_weight": 0.2,
          "accumulated_18_23_weight": 0.1,
          "monthly_range": [
            6,
            23
          ]
        }
      },
      "paths": {
        "artifacts_dir": "artifacts",
        "submissions_dir": "submissions",
        "logs_dir": "logs"
      },
      "tracking": {
        "enabled": true,
        "log_level": "INFO"
      },
      "bucket_specialization": {
        "enabled": true,
        "buckets": [
          1,
          2
        ],
        "base_model_type": "catboost"
      },
      "calibration": {
        "enabled": true,
        "grouping": [
          "scenario",
          "bucket",
          "time_window"
        ],
        "method": "linear",
        "time_windows_s1": [
          [
            0,
            5
          ],
          [
            6,
            11
          ],
          [
            12,
            23
          ]
        ],
        "time_windows_s2": [
          [
            6,
            11
          ],
          [
            12,
            17
          ],
          [
            18,
            23
          ]
        ]
      },
      "smoothing": {
        "enabled": true,
        "method": "rolling_median",
        "window": 3,
        "min_periods": 1,
        "clip_negative": true
      },
      "residual_model": {
        "enabled": false,
        "target_buckets": [
          1
        ],
        "target_windows_s1": [
          [
            0,
            5
          ],
          [
            6,
            11
          ]
        ],
        "target_windows_s2": [
          [
            6,
            11
          ]
        ],
        "model_type": "catboost"
      },
      "bias_correction": {
        "enabled": true,
        "group_cols": [
          "ther_area",
          "country"
        ],
        "method": "mean_error",
        "min_samples_per_group": 5
      },
      "multi_seed": {
        "enabled": true,
        "seeds": [
          42,
          2025,
          1337
        ],
        "ensemble": false,
        "selection_metric": "official_metric"
      },
      "target_transform": {
        "type": "log1p",
        "power_exponent": 0.5,
        "epsilon": "1e-6"
      },
      "augmentation": {
        "enabled": true,
        "jitter_volume_pct": 0.05,
        "drop_random_month_prob": 0.05,
        "min_months_postgx": 0,
        "max_months_postgx": 23
      },
      "small_data_mode": {
        "enabled": false,
        "overrides": {
          "depth": 6,
          "l2_leaf_reg": 6.0,
          "subsample": 0.8,
          "rsm": 0.8,
          "min_data_in_leaf": 20
        }
      },
      "cv": {
        "enabled": false,
        "n_folds": 5,
        "n_repeats": 3,
        "level": "series",
        "stability_check": true,
        "stability_threshold": 0.05
      }
    },
    "data_config": {
      "paths": {
        "raw_dir": "data/raw",
        "interim_dir": "data/interim",
        "processed_dir": "data/processed",
        "artifacts_dir": "artifacts"
      },
      "files": {
        "train": {
          "volume": "TRAIN/df_volume_train.csv",
          "generics": "TRAIN/df_generics_train.csv",
          "medicine_info": "TRAIN/df_medicine_info_train.csv"
        },
        "test": {
          "volume": "TEST/df_volume_test.csv",
          "generics": "TEST/df_generics_test.csv",
          "medicine_info": "TEST/df_medicine_info_test.csv"
        },
        "aux_metric": "docs/guide/auxiliar_metric_computation_example.csv",
        "submission_template": "docs/guide/submission_template.csv",
        "submission_example": "docs/guide/submission_example.csv"
      },
      "columns": {
        "id_keys": [
          "country",
          "brand_name"
        ],
        "time_key": "months_postgx",
        "calendar_month": "month",
        "raw_target": "volume",
        "model_target": "y_norm",
        "meta_cols": [
          "country",
          "brand_name",
          "months_postgx",
          "bucket",
          "avg_vol_12m",
          "y_norm",
          "volume",
          "mean_erosion",
          "month"
        ],
        "generics_cols": [
          "n_gxs"
        ],
        "medicine_info_categorical": [
          "ther_area",
          "main_package"
        ],
        "medicine_info_numerical": [
          "hospital_rate"
        ],
        "medicine_info_boolean": [
          "biological",
          "small_molecule"
        ]
      },
      "schema": {
        "volume": {
          "primary_key": [
            "country",
            "brand_name",
            "months_postgx"
          ],
          "columns": [
            "country",
            "brand_name",
            "month",
            "months_postgx",
            "volume"
          ]
        },
        "generics": {
          "primary_key": [
            "country",
            "brand_name",
            "months_postgx"
          ],
          "columns": [
            "country",
            "brand_name",
            "months_postgx",
            "n_gxs"
          ]
        },
        "medicine_info": {
          "primary_key": [
            "country",
            "brand_name"
          ],
          "columns": [
            "country",
            "brand_name",
            "ther_area",
            "hospital_rate",
            "main_package",
            "biological",
            "small_molecule"
          ]
        }
      },
      "missing_values": {
        "volume": "keep",
        "n_gxs": {
          "strategy": "ffill_then_zero"
        },
        "hospital_rate": {
          "strategy": "median_by_group",
          "group_by": "ther_area",
          "add_missing_flag": true
        },
        "ther_area": "Unknown",
        "main_package": "Unknown",
        "biological": {
          "default": false,
          "add_missing_flag": true
        },
        "small_molecule": {
          "default": false,
          "add_missing_flag": true
        }
      },
      "drive": {
        "base_path": "/content/drive/MyDrive/novartis-datathon-2025",
        "raw_dir": "/content/drive/MyDrive/novartis-datathon-2025/data/raw",
        "interim_dir": "/content/drive/MyDrive/novartis-datathon-2025/data/interim",
        "processed_dir": "/content/drive/MyDrive/novartis-datathon-2025/data/processed"
      },
      "validation": {
        "expected_train_series": 1953,
        "expected_test_series_s1": 228,
        "expected_test_series_s2": 112,
        "forecast_horizon": 24
      }
    },
    "model_config": {}
  },
  "config_hash": "bcc22caf"
}