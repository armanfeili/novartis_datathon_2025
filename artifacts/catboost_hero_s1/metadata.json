{
  "timestamp": "2025-11-30T10:00:58.744834",
  "git_commit": "5456d368",
  "scenario": 1,
  "model_type": "catboost",
  "random_seed": 42,
  "dataset": {
    "total_rows": 93744,
    "total_series": 1953,
    "train_rows": 37488,
    "train_series": 1562,
    "val_rows": 9384,
    "val_series": 391
  },
  "validation": {
    "val_fraction": 0.2,
    "stratify_by": "bucket",
    "split_level": "series"
  },
  "configs": {
    "run_config": {
      "reproducibility": {
        "seed": 42,
        "deterministic": true
      },
      "validation": {
        "val_fraction": 0.2,
        "stratify_by": "bucket",
        "split_level": "series"
      },
      "scenarios": {
        "scenario1": {
          "name": "Scenario 1 - No Post-Entry Actuals",
          "forecast_start": 0,
          "forecast_end": 23,
          "feature_cutoff": 0,
          "target_months": [
            0,
            1,
            2,
            3,
            4,
            5,
            6,
            7,
            8,
            9,
            10,
            11,
            12,
            13,
            14,
            15,
            16,
            17,
            18,
            19,
            20,
            21,
            22,
            23
          ]
        },
        "scenario2": {
          "name": "Scenario 2 - First 6 Months Available",
          "forecast_start": 6,
          "forecast_end": 23,
          "feature_cutoff": 6,
          "target_months": [
            6,
            7,
            8,
            9,
            10,
            11,
            12,
            13,
            14,
            15,
            16,
            17,
            18,
            19,
            20,
            21,
            22,
            23
          ]
        }
      },
      "official_metric": {
        "bucket_threshold": 0.25,
        "bucket_weights": {
          "bucket1": 2.0,
          "bucket2": 1.0
        },
        "metric1": {
          "monthly_weight": 0.2,
          "accumulated_0_5_weight": 0.5,
          "accumulated_6_11_weight": 0.2,
          "accumulated_12_23_weight": 0.1,
          "monthly_range": [
            0,
            23
          ],
          "early_range": [
            0,
            5
          ],
          "mid_range": [
            6,
            11
          ],
          "late_range": [
            12,
            23
          ]
        },
        "metric2": {
          "monthly_weight": 0.2,
          "accumulated_6_11_weight": 0.5,
          "accumulated_12_23_weight": 0.3,
          "monthly_range": [
            6,
            23
          ],
          "early_range": [
            6,
            11
          ],
          "late_range": [
            12,
            23
          ]
        }
      },
      "sample_weights": {
        "scenario1": {
          "months_0_5": 3.0,
          "months_6_11": 1.5,
          "months_12_23": 1.0
        },
        "scenario2": {
          "months_6_11": 2.5,
          "months_12_23": 1.0
        },
        "bucket_weights": {
          "bucket1": 2.0,
          "bucket2": 1.0
        }
      },
      "paths": {
        "artifacts_dir": "artifacts",
        "submissions_dir": "submissions",
        "logs_dir": "artifacts/logs",
        "metrics_dir": "artifacts/metrics"
      },
      "output": {
        "save_oof_predictions": true,
        "save_test_predictions": true,
        "save_feature_importance": true,
        "save_training_curves": true,
        "save_config_snapshot": true
      },
      "metrics": {
        "primary": "metric1_official",
        "secondary": [
          "rmse_y_norm",
          "mae_y_norm",
          "mape_y_norm"
        ],
        "log_per_series": true,
        "log_dir_pattern": "artifacts/{run_id}/metrics",
        "names": {
          "scenario1": "metric1_official",
          "scenario2": "metric2_official",
          "rmse": "rmse_y_norm",
          "mae": "mae_y_norm",
          "mape": "mape_y_norm"
        }
      },
      "logging": {
        "level": "INFO",
        "console": true,
        "file": true,
        "log_to_file": true,
        "format": "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
      },
      "drive": {
        "folder_id": "1iP8ffP5MfJ6hqig1-lQpVwzfrl9uuU03",
        "mount_path": "/content/drive",
        "base_path": "/content/drive/MyDrive/novartis-datathon-2025",
        "sync_artifacts": true
      },
      "hardware": {
        "use_gpu": false,
        "num_workers": 4
      },
      "experiment": {
        "name": "novartis-datathon-2025",
        "description": "Generic Erosion Forecasting"
      },
      "experiment_tracking": {
        "enabled": false,
        "backend": "mlflow",
        "experiment_name": "novartis-datathon-2025",
        "tracking_uri": null,
        "project_name": "novartis-datathon-2025"
      },
      "run": {
        "name_format": "{timestamp}_{model}_{scenario}",
        "timestamp_format": "%Y-%m-%d_%H-%M"
      },
      "bucket_specialization": {
        "enabled": false,
        "buckets": [
          1,
          2
        ],
        "base_model_type": "catboost"
      },
      "calibration": {
        "enabled": false,
        "grouping": [
          "scenario",
          "bucket",
          "time_window"
        ],
        "method": "linear",
        "time_windows_s1": [
          [
            0,
            5
          ],
          [
            6,
            11
          ],
          [
            12,
            23
          ]
        ],
        "time_windows_s2": [
          [
            6,
            11
          ],
          [
            12,
            17
          ],
          [
            18,
            23
          ]
        ]
      },
      "smoothing": {
        "enabled": false,
        "method": "rolling_median",
        "window": 3,
        "min_periods": 1,
        "clip_negative": true
      },
      "residual_model": {
        "enabled": false,
        "target_buckets": [
          1
        ],
        "target_windows_s1": [
          [
            0,
            5
          ],
          [
            6,
            11
          ]
        ],
        "target_windows_s2": [
          [
            6,
            11
          ]
        ],
        "model_type": "catboost"
      },
      "bias_correction": {
        "enabled": false,
        "group_cols": [
          "ther_area",
          "country"
        ],
        "method": "mean_error",
        "min_samples_per_group": 5
      },
      "multi_seed": {
        "enabled": false,
        "seeds": [
          42,
          2025,
          1337
        ],
        "ensemble": false,
        "selection_metric": "official_metric"
      },
      "target_transform": {
        "type": "none",
        "power_exponent": 0.5,
        "epsilon": "1e-6"
      },
      "small_data_mode": {
        "enabled": false,
        "overrides": {
          "depth": 6,
          "l2_leaf_reg": 6.0,
          "subsample": 0.8,
          "rsm": 0.8,
          "min_data_in_leaf": 20
        }
      },
      "cv": {
        "enabled": true,
        "n_folds": 5,
        "n_repeats": 3,
        "level": "series",
        "stability_check": true,
        "stability_threshold": 0.05
      },
      "augmentation": {
        "enabled": false,
        "jitter_volume_pct": 0.05,
        "drop_random_month_prob": 0.05,
        "min_months_postgx": 0,
        "max_months_postgx": 23
      }
    },
    "data_config": {
      "paths": {
        "raw_dir": "data/raw",
        "interim_dir": "data/interim",
        "processed_dir": "data/processed",
        "artifacts_dir": "artifacts"
      },
      "files": {
        "train": {
          "volume": "TRAIN/df_volume_train.csv",
          "generics": "TRAIN/df_generics_train.csv",
          "medicine_info": "TRAIN/df_medicine_info_train.csv"
        },
        "test": {
          "volume": "TEST/df_volume_test.csv",
          "generics": "TEST/df_generics_test.csv",
          "medicine_info": "TEST/df_medicine_info_test.csv"
        },
        "aux_metric": "docs/guide/auxiliar_metric_computation_example.csv",
        "submission_template": "docs/guide/submission_template.csv",
        "submission_example": "docs/guide/submission_example.csv"
      },
      "columns": {
        "id_keys": [
          "country",
          "brand_name"
        ],
        "time_key": "months_postgx",
        "calendar_month": "month",
        "raw_target": "volume",
        "model_target": "y_norm",
        "meta_cols": [
          "country",
          "brand_name",
          "months_postgx",
          "bucket",
          "avg_vol_12m",
          "y_norm",
          "volume",
          "mean_erosion",
          "month"
        ],
        "generics_cols": [
          "n_gxs"
        ],
        "medicine_info_categorical": [
          "ther_area",
          "main_package"
        ],
        "medicine_info_numerical": [
          "hospital_rate"
        ],
        "medicine_info_boolean": [
          "biological",
          "small_molecule"
        ]
      },
      "schema": {
        "volume": {
          "primary_key": [
            "country",
            "brand_name",
            "months_postgx"
          ],
          "columns": [
            "country",
            "brand_name",
            "month",
            "months_postgx",
            "volume"
          ]
        },
        "generics": {
          "primary_key": [
            "country",
            "brand_name",
            "months_postgx"
          ],
          "columns": [
            "country",
            "brand_name",
            "months_postgx",
            "n_gxs"
          ]
        },
        "medicine_info": {
          "primary_key": [
            "country",
            "brand_name"
          ],
          "columns": [
            "country",
            "brand_name",
            "ther_area",
            "hospital_rate",
            "main_package",
            "biological",
            "small_molecule"
          ]
        }
      },
      "missing_values": {
        "volume": "keep",
        "n_gxs": {
          "strategy": "ffill_then_zero"
        },
        "hospital_rate": {
          "strategy": "median_by_group",
          "group_by": "ther_area",
          "add_missing_flag": true
        },
        "ther_area": "Unknown",
        "main_package": "Unknown",
        "biological": {
          "default": false,
          "add_missing_flag": true
        },
        "small_molecule": {
          "default": false,
          "add_missing_flag": true
        }
      },
      "drive": {
        "base_path": "/content/drive/MyDrive/novartis-datathon-2025",
        "raw_dir": "/content/drive/MyDrive/novartis-datathon-2025/data/raw",
        "interim_dir": "/content/drive/MyDrive/novartis-datathon-2025/data/interim",
        "processed_dir": "/content/drive/MyDrive/novartis-datathon-2025/data/processed"
      },
      "validation": {
        "expected_train_series": 1953,
        "expected_test_series_s1": 228,
        "expected_test_series_s2": 112,
        "forecast_horizon": 24
      }
    },
    "model_config": {
      "model": {
        "name": "catboost",
        "task": "regression",
        "priority": 1
      },
      "active_config_id": null,
      "gpu": {
        "enabled": false,
        "device_id": 0
      },
      "sweep": {
        "enabled": true,
        "mode": "configs",
        "selection_metric": "official_metric",
        "n_folds": 3,
        "grid": {
          "depth": [
            4,
            6,
            8
          ],
          "learning_rate": [
            0.01,
            0.03,
            0.05
          ]
        }
      },
      "sweep_configs": [
        {
          "id": "default",
          "description": "Default balanced configuration",
          "params": {
            "depth": 6,
            "learning_rate": 0.03,
            "l2_leaf_reg": 3.0
          }
        },
        {
          "id": "shallow",
          "description": "Shallow trees for simpler patterns",
          "params": {
            "depth": 4,
            "learning_rate": 0.05,
            "l2_leaf_reg": 1.0
          }
        },
        {
          "id": "conservative",
          "description": "Conservative settings with strong regularization",
          "params": {
            "depth": 5,
            "learning_rate": 0.02,
            "l2_leaf_reg": 10.0,
            "random_strength": 2.0
          }
        },
        {
          "id": "s1_best",
          "description": "Best configuration for Scenario 1",
          "params": {
            "depth": 6,
            "learning_rate": 0.03,
            "l2_leaf_reg": 3.0
          }
        },
        {
          "id": "s2_best",
          "description": "Best configuration for Scenario 2",
          "params": {
            "depth": 6,
            "learning_rate": 0.03,
            "l2_leaf_reg": 3.0
          }
        }
      ],
      "params": {
        "loss_function": "RMSE",
        "eval_metric": "RMSE",
        "depth": 6,
        "min_data_in_leaf": 20,
        "learning_rate": 0.03,
        "iterations": 3000,
        "l2_leaf_reg": 3.0,
        "random_strength": 1.0,
        "bagging_temperature": 1.0,
        "early_stopping_rounds": 100,
        "random_seed": 42,
        "verbose": 100,
        "thread_count": -1
      },
      "training": {
        "use_early_stopping": true,
        "eval_metric": "RMSE",
        "use_sample_weights": true
      },
      "categorical_features": [
        "ther_area",
        "main_package",
        "time_bucket",
        "hospital_rate_bin",
        "n_gxs_bin"
      ],
      "best_params": {
        "scenario1": {
          "depth": 6,
          "learning_rate": 0.03,
          "l2_leaf_reg": 3.0
        },
        "scenario2": {
          "depth": 6,
          "learning_rate": 0.03,
          "l2_leaf_reg": 3.0
        }
      },
      "sweep_presets": {
        "minimal": {
          "depth": [
            4,
            6
          ],
          "learning_rate": [
            0.03,
            0.05
          ]
        }
      },
      "ensemble": {
        "include": true,
        "weight_optimization": true,
        "default_weight": 0.5
      },
      "bagging": {
        "enabled": false,
        "n_models": 3,
        "seeds": null,
        "weighting": "uniform"
      },
      "monotonicity": {
        "enabled": false,
        "constraints": {
          "months_postgx": -1
        }
      },
      "small_data_mode": {
        "enabled": false,
        "overrides": {
          "depth": 6,
          "l2_leaf_reg": 6.0,
          "subsample": 0.8,
          "rsm": 0.8,
          "min_data_in_leaf": 20
        }
      }
    }
  },
  "config_hash": "7e5af79c"
}