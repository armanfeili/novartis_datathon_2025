config_hash: bcc22caf
data_config:
  columns:
    calendar_month: month
    generics_cols:
    - n_gxs
    id_keys:
    - country
    - brand_name
    medicine_info_boolean:
    - biological
    - small_molecule
    medicine_info_categorical:
    - ther_area
    - main_package
    medicine_info_numerical:
    - hospital_rate
    meta_cols:
    - country
    - brand_name
    - months_postgx
    - bucket
    - avg_vol_12m
    - y_norm
    - volume
    - mean_erosion
    - month
    model_target: y_norm
    raw_target: volume
    time_key: months_postgx
  drive:
    base_path: /content/drive/MyDrive/novartis-datathon-2025
    interim_dir: /content/drive/MyDrive/novartis-datathon-2025/data/interim
    processed_dir: /content/drive/MyDrive/novartis-datathon-2025/data/processed
    raw_dir: /content/drive/MyDrive/novartis-datathon-2025/data/raw
  files:
    aux_metric: docs/guide/auxiliar_metric_computation_example.csv
    submission_example: docs/guide/submission_example.csv
    submission_template: docs/guide/submission_template.csv
    test:
      generics: TEST/df_generics_test.csv
      medicine_info: TEST/df_medicine_info_test.csv
      volume: TEST/df_volume_test.csv
    train:
      generics: TRAIN/df_generics_train.csv
      medicine_info: TRAIN/df_medicine_info_train.csv
      volume: TRAIN/df_volume_train.csv
  missing_values:
    biological:
      add_missing_flag: true
      default: false
    hospital_rate:
      add_missing_flag: true
      group_by: ther_area
      strategy: median_by_group
    main_package: Unknown
    n_gxs:
      strategy: ffill_then_zero
    small_molecule:
      add_missing_flag: true
      default: false
    ther_area: Unknown
    volume: keep
  paths:
    artifacts_dir: artifacts
    interim_dir: data/interim
    processed_dir: data/processed
    raw_dir: data/raw
  schema:
    generics:
      columns:
      - country
      - brand_name
      - months_postgx
      - n_gxs
      primary_key:
      - country
      - brand_name
      - months_postgx
    medicine_info:
      columns:
      - country
      - brand_name
      - ther_area
      - hospital_rate
      - main_package
      - biological
      - small_molecule
      primary_key:
      - country
      - brand_name
    volume:
      columns:
      - country
      - brand_name
      - month
      - months_postgx
      - volume
      primary_key:
      - country
      - brand_name
      - months_postgx
  validation:
    expected_test_series_s1: 228
    expected_test_series_s2: 112
    expected_train_series: 1953
    forecast_horizon: 24
features_config:
  drug:
    boolean:
    - biological
    - small_molecule
    categoricals:
    - ther_area
    - main_package
    derive_is_injection: true
    encoding: label
    hospital_rate_bins:
    - 30
    - 70
    numerical:
    - hospital_rate
  feature_pruning:
    drop_bottom_fraction: 0.2
    enabled: false
    importance_threshold: null
    min_keep: 50
  generics:
    include_cummax: true
    include_entry_speed: true
    include_first_month: true
    include_future_n_gxs: true
    include_has_generic: true
    include_multiple_generics: true
    include_n_gxs: true
  interactions:
    enabled: false
    pairs:
    - - n_gxs
      - biological
    - - hospital_rate
      - months_postgx
    - - ther_area_encoded
      - n_gxs
  leakage_prevention:
    forbidden_features:
    - bucket
    - y_norm
    - volume
    - mean_erosion
    - country
    - brand_name
    scenario1:
      feature_cutoff: 0
      target_range:
      - 0
      - 23
    scenario2:
      feature_cutoff: 6
      target_range:
      - 6
      - 23
  pre_entry:
    compute_max: true
    compute_min: true
    compute_seasonal: true
    compute_trend: true
    compute_volatility: true
    log_transform: true
    windows:
    - 3
    - 6
    - 12
  scenario2_early:
    compute_avg_0_5: true
    compute_drop_month_0: true
    compute_erosion_0_5: true
    compute_trend_0_5: true
  selection:
    correlation_threshold: 0.95
    drop_high_correlation: false
    drop_low_variance: false
    variance_threshold: 0.01
  target_encoding:
    enabled: false
    features:
    - ther_area
    - country
    n_folds: 5
    smoothing: 10
  time:
    decay_alpha: 0.1
    include_decay: true
    include_is_post_entry: true
    include_month_of_year: true
    include_months_postgx: true
    include_quarters: true
    include_squared: true
    include_time_bucket: true
    time_buckets:
      early:
      - 0
      - 5
      late:
      - 12
      - 23
      mid:
      - 6
      - 11
      pre:
      - -999
      - -1
model_config: {}
model_type: catboost
run_config:
  augmentation:
    drop_random_month_prob: 0.05
    enabled: true
    jitter_volume_pct: 0.05
    max_months_postgx: 23
    min_months_postgx: 0
  bias_correction:
    enabled: true
    group_cols:
    - ther_area
    - country
    method: mean_error
    min_samples_per_group: 5
  bucket_specialization:
    base_model_type: catboost
    buckets:
    - 1
    - 2
    enabled: true
  calibration:
    enabled: true
    grouping:
    - scenario
    - bucket
    - time_window
    method: linear
    time_windows_s1:
    - - 0
      - 5
    - - 6
      - 11
    - - 12
      - 23
    time_windows_s2:
    - - 6
      - 11
    - - 12
      - 17
    - - 18
      - 23
  cv:
    enabled: false
    level: series
    n_folds: 5
    n_repeats: 3
    stability_check: true
    stability_threshold: 0.05
  multi_seed:
    enabled: true
    ensemble: false
    seeds:
    - 42
    - 2025
    - 1337
    selection_metric: official_metric
  official_metric:
    bucket_threshold: 0.25
    bucket_weights:
      bucket1: 2.0
      bucket2: 1.0
    metric1:
      accumulated_0_5_weight: 0.5
      accumulated_12_23_weight: 0.1
      accumulated_6_11_weight: 0.2
      monthly_range:
      - 0
      - 23
      monthly_weight: 0.2
    metric2:
      accumulated_12_17_weight: 0.2
      accumulated_18_23_weight: 0.1
      accumulated_6_11_weight: 0.5
      monthly_range:
      - 6
      - 23
      monthly_weight: 0.2
  paths:
    artifacts_dir: artifacts
    logs_dir: logs
    submissions_dir: submissions
  reproducibility:
    deterministic: true
    seed: 42
  residual_model:
    enabled: false
    model_type: catboost
    target_buckets:
    - 1
    target_windows_s1:
    - - 0
      - 5
    - - 6
      - 11
    target_windows_s2:
    - - 6
      - 11
  scenarios:
    scenario1:
      feature_cutoff: 0
      forecast_end: 23
      forecast_start: 0
      name: Scenario 1 - No Post-Entry Actuals
      target_months:
      - 0
      - 1
      - 2
      - 3
      - 4
      - 5
      - 6
      - 7
      - 8
      - 9
      - 10
      - 11
      - 12
      - 13
      - 14
      - 15
      - 16
      - 17
      - 18
      - 19
      - 20
      - 21
      - 22
      - 23
    scenario2:
      feature_cutoff: 6
      forecast_end: 23
      forecast_start: 6
      name: Scenario 2 - First 6 Months Available
      target_months:
      - 6
      - 7
      - 8
      - 9
      - 10
      - 11
      - 12
      - 13
      - 14
      - 15
      - 16
      - 17
      - 18
      - 19
      - 20
      - 21
      - 22
      - 23
  small_data_mode:
    enabled: false
    overrides:
      depth: 6
      l2_leaf_reg: 6.0
      min_data_in_leaf: 20
      rsm: 0.8
      subsample: 0.8
  smoothing:
    clip_negative: true
    enabled: true
    method: rolling_median
    min_periods: 1
    window: 3
  target_transform:
    epsilon: 1e-6
    power_exponent: 0.5
    type: log1p
  tracking:
    enabled: true
    log_level: INFO
  validation:
    split_level: series
    stratify_by: bucket
    val_fraction: 0.2
scenario: 1
