{
  "run_info": {
    "run_id": "20251129_015712",
    "timestamp": "20251129_015712",
    "scenario": 1,
    "date": "2025-11-29",
    "time": "01:57:12"
  },
  "best_model": {
    "name": "Baseline-ExpDecay(0.020)",
    "final_score": 0.14827707740766516
  },
  "all_results": [
    {
      "model": "Baseline-ExpDecay(0.020)",
      "final_score": 0.14827707740766516,
      "bucket1_pe": NaN,
      "bucket2_pe": 0.14827707740766516
    },
    {
      "model": "Baseline-NoErosion",
      "final_score": 0.2469817360082024,
      "bucket1_pe": NaN,
      "bucket2_pe": 0.24698173600820236
    },
    {
      "model": "ARHOW-SARIMAX+HW",
      "final_score": 0.27922731858520816,
      "bucket1_pe": NaN,
      "bucket2_pe": 0.27922731858520816
    },
    {
      "model": "Hybrid-Physics+LightGBM",
      "final_score": 0.37563790250216966,
      "bucket1_pe": NaN,
      "bucket2_pe": 0.37563790250216966
    },
    {
      "model": "Hybrid-Physics+XGBoost",
      "final_score": 0.5016593935761151,
      "bucket1_pe": NaN,
      "bucket2_pe": 0.5016593935761151
    },
    {
      "model": "LightGBM",
      "final_score": 0.5179908470057952,
      "bucket1_pe": NaN,
      "bucket2_pe": 0.5179908470057952
    },
    {
      "model": "XGBoost",
      "final_score": 0.5595566503464428,
      "bucket1_pe": NaN,
      "bucket2_pe": 0.5595566503464428
    }
  ],
  "config": {
    "run_mode": {
      "scenario": 1,
      "test_mode": true,
      "test_mode_brands": 50,
      "submissions_enabled": {
        "baseline": true,
        "hybrid": true,
        "lightgbm": true,
        "xgboost": true,
        "arihow": true
      }
    },
    "pipeline_steps": {
      "run_eda": false,
      "run_training": true,
      "run_submission": true,
      "run_validation": true
    },
    "models_enabled": {
      "baseline_no_erosion": true,
      "baseline_exp_decay": true,
      "lightgbm": true,
      "xgboost": true,
      "hybrid_lightgbm": true,
      "hybrid_xgboost": true,
      "arihow": true
    },
    "paths": {
      "project_root": "D:\\Datathon\\novartis_datathon_2025\\Main_project",
      "data_raw": "D:\\Datathon\\novartis_datathon_2025\\Main_project\\data\\raw",
      "data_processed": "D:\\Datathon\\novartis_datathon_2025\\Main_project\\data\\processed",
      "models_dir": "D:\\Datathon\\novartis_datathon_2025\\Main_project\\models",
      "submissions_dir": "D:\\Datathon\\novartis_datathon_2025\\Main_project\\submissions",
      "reports_dir": "D:\\Datathon\\novartis_datathon_2025\\Main_project\\reports"
    },
    "constants": {
      "pre_entry_months": 12,
      "post_entry_months": 24,
      "bucket_1_threshold": 0.25,
      "bucket_1_weight": 2,
      "bucket_2_weight": 1
    },
    "metric_weights_scenario1": {
      "monthly_weight": 0.2,
      "sum_0_5_weight": 0.5,
      "sum_6_11_weight": 0.2,
      "sum_12_23_weight": 0.1
    },
    "metric_weights_scenario2": {
      "monthly_weight": 0.2,
      "sum_6_11_weight": 0.5,
      "sum_12_23_weight": 0.3
    },
    "model_params": {
      "random_state": 42,
      "test_size": 0.2,
      "n_splits_cv": 5,
      "lgbm_params": {
        "objective": "regression",
        "metric": "rmse",
        "boosting_type": "gbdt",
        "num_leaves": 31,
        "learning_rate": 0.03,
        "n_estimators": 500,
        "feature_fraction": 0.8,
        "bagging_fraction": 0.8,
        "bagging_freq": 5,
        "verbose": -1,
        "random_state": 42
      },
      "xgb_params": {
        "objective": "reg:squarederror",
        "eval_metric": "rmse",
        "max_depth": 6,
        "learning_rate": 0.03,
        "n_estimators": 500,
        "subsample": 0.8,
        "colsample_bytree": 0.8,
        "random_state": 42
      },
      "arihow_params": {
        "arima_order": [
          2,
          1,
          2
        ],
        "seasonal_order": [
          0,
          0,
          0,
          0
        ],
        "hw_trend": "add",
        "hw_seasonal": null,
        "hw_seasonal_periods": 12,
        "weight_window": 12,
        "min_history_months": 6,
        "suppress_warnings": true
      },
      "hybrid_params": {
        "ml_type": "lightgbm",
        "use_decay_features": true,
        "residual_clip": null
      }
    },
    "baseline_params": {
      "decay_rate_range": [
        0.005,
        0.1
      ],
      "decay_rate_steps": 20,
      "default_decay_rate": 0.02
    },
    "feature_params": {
      "lag_windows": [
        1,
        3,
        6,
        12
      ],
      "rolling_windows": [
        3,
        6,
        12
      ],
      "pct_change_windows": [
        1,
        3,
        6
      ],
      "pre_entry_features": {
        "compute_slope": true,
        "compute_volatility": true,
        "compute_momentum": true
      }
    }
  },
  "data_info": {
    "train_rows": 1920,
    "val_rows": 480,
    "train_brands": 40,
    "val_brands": 10,
    "n_features": 76,
    "feature_cols": [
      "months_postgx",
      "n_gxs",
      "hospital_rate",
      "n_gxs_capped",
      "n_gxs_log",
      "n_gxs_squared",
      "n_gxs_cummax",
      "n_gxs_change",
      "has_generics",
      "high_competition",
      "months_with_generics",
      "competition_intensity",
      "n_gxs_change_3m",
      "months_postgx_squared",
      "months_postgx_sqrt",
      "months_postgx_log",
      "months_postgx_cubed",
      "is_early_period",
      "is_mid_period",
      "is_late_period",
      "is_equilibrium",
      "is_first_6_months",
      "is_months_6_11",
      "is_months_12_plus",
      "time_bucket_encoded",
      "quarter",
      "decay_phase",
      "hospital_rate_bucket_encoded",
      "is_high_hospital_rate",
      "is_retail_focused",
      "hospital_rate_squared",
      "ther_area_erosion_rank",
      "ther_area_mean_erosion",
      "is_high_erosion_area",
      "is_low_erosion_area",
      "volume_lag_1",
      "volume_diff_1",
      "volume_lag_3",
      "volume_diff_3",
      "volume_lag_6",
      "volume_diff_6",
      "volume_lag_12",
      "volume_pct_change_1",
      "volume_pct_change_3",
      "volume_rolling_mean_3",
      "volume_rolling_std_3",
      "volume_rolling_min_3",
      "volume_rolling_max_3",
      "volume_rolling_mean_6",
      "volume_rolling_std_6",
      "volume_rolling_min_6",
      "volume_rolling_max_6",
      "volume_rolling_mean_12",
      "volume_rolling_std_12",
      "volume_rolling_min_12",
      "volume_rolling_max_12",
      "erosion_rate_3m",
      "time_x_competition",
      "time_x_n_gxs_log",
      "time_x_hospital",
      "competition_x_hospital",
      "early_high_competition",
      "biological_x_months",
      "ther_erosion_x_time",
      "high_erosion_early",
      "country_encoded",
      "ther_area_encoded",
      "main_package_encoded",
      "pre_entry_slope",
      "pre_entry_volatility",
      "pre_entry_min",
      "pre_entry_max",
      "pre_entry_growth_rate",
      "pre_entry_last_volume",
      "log_avg_vol",
      "pre_loe_growth_flag"
    ],
    "months_predicted": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9,
      10,
      11,
      12,
      13,
      14,
      15,
      16,
      17,
      18,
      19,
      20,
      21,
      22,
      23
    ],
    "test_mode": true
  },
  "feature_importance": [
    {
      "feature": "erosion_rate_3m",
      "importance": 833
    },
    {
      "feature": "volume_rolling_std_3",
      "importance": 644
    },
    {
      "feature": "volume_diff_1",
      "importance": 594
    },
    {
      "feature": "volume_diff_6",
      "importance": 544
    },
    {
      "feature": "volume_rolling_min_3",
      "importance": 521
    },
    {
      "feature": "volume_rolling_mean_3",
      "importance": 518
    },
    {
      "feature": "volume_rolling_max_3",
      "importance": 504
    },
    {
      "feature": "volume_diff_3",
      "importance": 493
    },
    {
      "feature": "volume_rolling_std_6",
      "importance": 491
    },
    {
      "feature": "volume_rolling_std_12",
      "importance": 436
    }
  ]
}